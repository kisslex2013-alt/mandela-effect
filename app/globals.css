@tailwind base;
@tailwind components;
@tailwind utilities;

/* Плавный скролл */
html {
  scroll-behavior: smooth;
}

/* Fade-in анимация для секций */
.fade-in-section {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

.fade-in-section.is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Reduced motion для пользователей с ограниченными возможностями */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Скрыть скроллбар в карусели */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Плавная прокрутка для карусели */
.snap-x {
  scroll-snap-type: x mandatory;
}

.snap-center {
  scroll-snap-align: center;
}

/* Screen reader only класс */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Focus states для keyboard navigation */
*:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
  border-radius: 0.25rem;
}

/* Улучшенные touch targets (минимум 44x44px) */
button,
a[role="button"],
input[type="button"],
input[type="submit"] {
  min-height: 44px;
  min-width: 44px;
}

/* Улучшенная видимость для интерактивных элементов */
@media (hover: hover) {
  button:hover,
  a:hover {
    opacity: 0.9;
  }
}

/* Улучшенный контраст для текста */
.text-light\/60 {
  color: rgba(224, 224, 224, 0.7);
}

.text-light\/80 {
  color: rgba(224, 224, 224, 0.85);
}

/* Анимация fadeIn для интерпретаций */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}

/* Улучшенный scrollbar */
::-webkit-scrollbar {
  width: 12px;
}

::-webkit-scrollbar-track {
  background: rgba(10, 10, 10, 0.5);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #3B82F6 0%, #F97316 100%);
  border-radius: 6px;
  border: 2px solid rgba(10, 10, 10, 0.5);
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #60A5FA 0%, #FB923C 100%);
}

/* Плавные transitions для всех интерактивных элементов */
button,
a,
input,
select,
textarea {
  transition: all 0.2s ease-out;
}

/* Glitch Animations */
@keyframes glitch-1 {
  0% { clip-path: inset(20% 0 80% 0); transform: translate(-4px, 2px); }
  20% { clip-path: inset(60% 0 10% 0); transform: translate(4px, -2px); }
  40% { clip-path: inset(40% 0 50% 0); transform: translate(-4px, 4px); }
  60% { clip-path: inset(80% 0 5% 0); transform: translate(4px, -4px); }
  80% { clip-path: inset(10% 0 70% 0); transform: translate(-2px, 2px); }
  100% { clip-path: inset(30% 0 50% 0); transform: translate(2px, -2px); }
}

@keyframes glitch-2 {
  0% { clip-path: inset(10% 0 60% 0); transform: translate(4px, -2px); }
  20% { clip-path: inset(30% 0 20% 0); transform: translate(-4px, 2px); }
  40% { clip-path: inset(70% 0 10% 0); transform: translate(4px, -4px); }
  60% { clip-path: inset(20% 0 50% 0); transform: translate(-4px, 4px); }
  80% { clip-path: inset(50% 0 30% 0); transform: translate(2px, -2px); }
  100% { clip-path: inset(0% 0 80% 0); transform: translate(-2px, 2px); }
}

.animate-glitch-1 {
  animation: glitch-1 0.4s infinite linear alternate-reverse;
}

.animate-glitch-2 {
  animation: glitch-2 0.4s infinite linear alternate-reverse;
}

.glitch-hover {
  position: relative;
}

.glitch-hover::before,
.glitch-hover::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  background: #0f0f0f; /* Цвет фона карточки, чтобы перекрывать */
  pointer-events: none;
}

.group:hover .glitch-hover::before {
  opacity: 0.5;
  color: #ff00ff;
  z-index: -1;
  animation: glitch-anim-1 0.4s infinite linear alternate-reverse;
}

.group:hover .glitch-hover::after {
  opacity: 0.5;
  color: #00ffff;
  z-index: -2;
  animation: glitch-anim-2 0.4s infinite linear alternate-reverse;
}

/* Кнопка "Reality Shake" */
@keyframes reality-shake {
  0% { transform: translate(0, 0); box-shadow: 2px 2px 0px rgba(59, 130, 246, 0.8); } /* Blue */
  25% { transform: translate(-1px, 1px); box-shadow: -2px 2px 0px rgba(249, 115, 22, 0.8); } /* Orange */
  50% { transform: translate(1px, -1px); box-shadow: 2px -2px 0px rgba(59, 130, 246, 0.8); }
  75% { transform: translate(-1px, -1px); box-shadow: -2px -2px 0px rgba(249, 115, 22, 0.8); }
  100% { transform: translate(0, 0); box-shadow: 2px 2px 0px rgba(59, 130, 246, 0.8); }
}

.btn-glitch {
  position: relative;
  transition: all 0.2s ease;
}

.btn-glitch:hover {
  animation: reality-shake 0.2s infinite linear;
  border-color: transparent; /* Скрываем рамку, чтобы тень работала лучше */
  z-index: 10;
}

/* --- COMPLEX GLITCH EFFECT --- */

.glitch-wrapper {
  position: relative;
  overflow: hidden;
}

/* Слои глитча скрыты по умолчанию */
.glitch-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  z-index: 2;
  opacity: 0;
  pointer-events: none;
}

/* При наведении на карточку (.group) активируем слои */
.group:hover .glitch-layers .glitch-layer:nth-child(1) {
  opacity: 1;
  transform: translateX(-5%);
  animation: glitch-anim-1 2s infinite linear alternate;
}

.group:hover .glitch-layers .glitch-layer:nth-child(2) {
  opacity: 1;
  transform: translateX(3%) translateY(3%);
  animation: glitch-anim-2 2.3s -0.8s infinite linear alternate;
}

.group:hover .glitch-layers .glitch-layer:nth-child(3) {
  opacity: 1;
  transform: translateX(5%);
  animation: glitch-anim-flash 1s infinite linear;
}

/* Анимации clip-path */
@keyframes glitch-anim-1 {
  0% { clip-path: polygon(0 0%, 100% 0%, 100% 5%, 0 5%); }
  10% { clip-path: polygon(0 15%, 100% 15%, 100% 15%, 0 15%); }
  20% { clip-path: polygon(0 10%, 100% 10%, 100% 20%, 0 20%); }
  30% { clip-path: polygon(0 1%, 100% 1%, 100% 2%, 0 2%); }
  40% { clip-path: polygon(0 35%, 100% 35%, 100% 35%, 0 35%); }
  50% { clip-path: polygon(0 45%, 100% 45%, 100% 46%, 0 46%); }
  60% { clip-path: polygon(0 50%, 100% 50%, 100% 70%, 0 70%); }
  70% { clip-path: polygon(0 70%, 100% 70%, 100% 70%, 0 70%); }
  80% { clip-path: polygon(0 80%, 100% 80%, 100% 80%, 0 80%); }
  90% { clip-path: polygon(0 50%, 100% 50%, 100% 55%, 0 55%); }
  100% { clip-path: polygon(0 60%, 100% 60%, 100% 70%, 0 70%); }
}

@keyframes glitch-anim-2 {
  0% { clip-path: polygon(0 15%, 100% 15%, 100% 30%, 0 30%); }
  15% { clip-path: polygon(0 3%, 100% 3%, 100% 3%, 0 3%); }
  25% { clip-path: polygon(0 8%, 100% 8%, 100% 20%, 0 20%); }
  30% { clip-path: polygon(0 20%, 100% 20%, 100% 20%, 0 20%); }
  45% { clip-path: polygon(0 45%, 100% 45%, 100% 45%, 0 45%); }
  50% { clip-path: polygon(0 50%, 100% 50%, 100% 57%, 0 57%); }
  65% { clip-path: polygon(0 60%, 100% 60%, 100% 60%, 0 60%); }
  75% { clip-path: polygon(0 80%, 100% 80%, 100% 80%, 0 80%); }
  80% { clip-path: polygon(0 40%, 100% 40%, 100% 60%, 0 60%); }
  95% { clip-path: polygon(0 45%, 100% 45%, 100% 60%, 0 60%); }
  100% { clip-path: polygon(0 11%, 100% 11%, 100% 15%, 0 15%); }
}

@keyframes glitch-anim-flash {
  0% { opacity: 0.2; }
  30%, 100% { opacity: 0; }
}

/* Вечный глитч-эффект после голосования */
.force-active .glitch-layers .glitch-layer:nth-child(1) {
  opacity: 0.3 !important;
  transform: translateX(-5%);
  animation: glitch-anim-1 4s infinite linear alternate !important;
}

.force-active .glitch-layers .glitch-layer:nth-child(2) {
  opacity: 0.3 !important;
  transform: translateX(3%) translateY(3%);
  animation: glitch-anim-2 5s -0.8s infinite linear alternate !important;
}

.force-active .glitch-layers .glitch-layer:nth-child(3) {
  opacity: 0.2 !important;
  transform: translateX(5%);
  animation: glitch-anim-flash 1.5s infinite linear !important;
}

/* Glitch Text Effect */
.glitch-text {
  position: relative;
}

.glitch-text::before,
.glitch-text::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.glitch-text::before {
  left: 2px;
  text-shadow: -1px 0 #ff00c1;
  clip: rect(44px, 450px, 56px, 0);
  animation: glitch-anim 5s infinite linear alternate-reverse;
}

.glitch-text::after {
  left: -2px;
  text-shadow: -1px 0 #00fff9;
  clip: rect(44px, 450px, 56px, 0);
  animation: glitch-anim2 5s infinite linear alternate-reverse;
}

@keyframes glitch-anim {
  0% { clip: rect(21px, 9999px, 86px, 0); }
  20% { clip: rect(69px, 9999px, 12px, 0); }
  40% { clip: rect(1px, 9999px, 66px, 0); }
  60% { clip: rect(55px, 9999px, 11px, 0); }
  80% { clip: rect(31px, 9999px, 92px, 0); }
  100% { clip: rect(81px, 9999px, 34px, 0); }
}

@keyframes glitch-anim2 {
  0% { clip: rect(11px, 9999px, 56px, 0); }
  20% { clip: rect(9px, 9999px, 2px, 0); }
  40% { clip: rect(91px, 9999px, 16px, 0); }
  60% { clip: rect(55px, 9999px, 11px, 0); }
  80% { clip: rect(21px, 9999px, 92px, 0); }
  100% { clip: rect(31px, 9999px, 14px, 0); }
}
