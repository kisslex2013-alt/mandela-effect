// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Effect {
  id          String   @id @default(cuid())
  title       String
  description String
  content     String
  category    String
  imageUrl    String?
  videoUrl    String?
  
  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  votesFor     Int      @default(0)
  votesAgainst Int      @default(0)
  views        Int      @default(0)
  
  // –ù–æ–≤—ã–µ —Ñ–∏—á–∏
  residue          String?   // –ö—É–ª—å—Ç—É—Ä–Ω—ã–µ —Å–ª–µ–¥—ã
  residueSource    String?   // –°—Å—ã–ª–∫–∞ –¥–ª—è –æ—Å—Ç–∞—Ç–∫–æ–≤
  history          String?   // –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è
  historySource    String?   // –°—Å—ã–ª–∫–∞ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
  yearDiscovered   Int?
  similarEffectIds String[]  @default([]) // –ú–∞—Å—Å–∏–≤ ID –ø–æ—Ö–æ–∂–∏—Ö
  
  // –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ (–Ω–∞—É—á–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –∏ –≤–µ—Ä—Å–∏–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞)
  interpretations  Json?
  
  submissions Submission[] // –°–≤—è–∑—å, –µ—Å–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∏–∑ –∑–∞—è–≤–∫–∏

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Submission {
  id          String   @id @default(cuid())
  
  // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã
  category    String
  title       String
  question    String
  variantA    String
  variantB    String
  
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
  currentState String? // "–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è"
  sourceLink   String? // "–°—Å—ã–ª–∫–∞ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫"
  submitterEmail String? // "–í–∞—à email"
  
  // –ü–æ–ª–µ –¥–ª—è –±–ª–æ–∫–∞ "–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏" (—Ö—Ä–∞–Ω–∏–º –∫–∞–∫ JSON –æ–±—ä–µ–∫—Ç, —Ç–∞–∫ –∫–∞–∫ —Ç–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ –ø–æ–¥–ø—É–Ω–∫—Ç–æ–≤)
  interpretations Json? 

  // –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è
  status      String   @default("PENDING") // PENDING, APPROVED, REJECTED
  createdAt   DateTime @default(now())
  
  // –°–≤—è–∑—å —Å —Å–æ–∑–¥–∞–Ω–Ω—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º (–Ω–∞ –±—É–¥—É—â–µ–µ)
  createdEffectId String?
  createdEffect   Effect? @relation(fields: [createdEffectId], references: [id])
}

model Category {
  id        String   @id @default(cuid())
  slug      String   @unique // –Ω–∞–ø—Ä–∏–º–µ—Ä "films", "brands"
  name      String   // –Ω–∞–ø—Ä–∏–º–µ—Ä "–§–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã"
  emoji     String   // –Ω–∞–ø—Ä–∏–º–µ—Ä "üé¨"
  color     String?  // —Ü–≤–µ—Ç –¥–ª—è –±–µ–π–¥–∂–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä "red", "blue")
  sortOrder Int      @default(0) // –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
