# üß† –ö–æ–Ω—Ç–µ–∫—Å—Ç –ü—Ä–æ–µ–∫—Ç–∞ "–≠—Ñ—Ñ–µ–∫—Ç –ú–∞–Ω–¥–µ–ª—ã"

> **–ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–Ω–∞—á–∏–º–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-19  
**–í–µ—Ä—Å–∏—è:** 1.1.0

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#1-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
2. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#2-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
3. [–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#3-—Ñ–∞–π–ª–æ–≤–∞—è-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
4. [–ö–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞ (Deep Dive)](#4-–∫–ª—é—á–µ–≤–∞—è-–ª–æ–≥–∏–∫–∞-deep-dive)
5. [–¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∑–∞–¥–∞—á–∏ (TODO)](#5-—Ç–µ–∫—É—â–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã-–∏-–∑–∞–¥–∞—á–∏-todo)
6. [–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#6-–ø—Ä–∞–≤–∏–ª–∞-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

## 1. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Framework & Core
- **Next.js 16.0.7** (App Router) ‚Äî React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **React 19.2.1** ‚Äî UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **TypeScript 5** ‚Äî —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Webpack** ‚Äî —Å–±–æ—Ä—â–∏–∫ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–ª–∞–≥ `--webpack`)

### UI & –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **Tailwind CSS 3.4.17** ‚Äî utility-first CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Framer Motion 12.23.24** ‚Äî –∞–Ω–∏–º–∞—Ü–∏–∏ (GPU-accelerated)
- **Lucide React 0.555.0** ‚Äî –∏–∫–æ–Ω–∫–∏
- **React Hot Toast 2.6.0** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **Prisma 5.22.0** ‚Äî ORM –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- **@prisma/client 5.22.0** ‚Äî –∫–ª–∏–µ–Ω—Ç Prisma

### AI & –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **OpenAI SDK 6.9.1** ‚Äî –¥–ª—è DeepSeek —á–µ—Ä–µ–∑ OpenRouter
- **@google/generative-ai 0.24.1** ‚Äî Gemini 1.5 Flash
- **exa-js 2.0.11** ‚Äî RAG –ø–æ–∏—Å–∫ –¥–ª—è –æ—Å—Ç–∞—Ç–∫–æ–≤ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

### –•—Ä–∞–Ω–∏–ª–∏—â–µ –º–µ–¥–∏–∞
- **@supabase/supabase-js 2.86.2** ‚Äî Supabase Storage –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **@vercel/blob 2.0.0** ‚Äî Vercel Blob Storage (fallback)

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- **@vercel/analytics 1.5.0** ‚Äî –≤–µ–±-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **@vercel/speed-insights 1.3.1** ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- **Recharts 3.5.1** ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- **date-fns 4.1.0** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
- **zod 4.1.13** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º
- **uuid 11.1.0** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è UUID
- **canvas-confetti 1.9.4** ‚Äî —ç—Ñ—Ñ–µ–∫—Ç—ã –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
- **html2canvas 1.4.1** ‚Äî —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞
- **sharp 0.34.5** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ Prisma (`prisma/schema.prisma`)

#### –ú–æ–¥–µ–ª—å `Effect` (–≠—Ñ—Ñ–µ–∫—Ç—ã –ú–∞–Ω–¥–µ–ª—ã)
```prisma
model Effect {
  id          String  @id @default(cuid())
  title       String
  description String
  content     String  // –í–∞—Ä–∏–∞–Ω—Ç—ã A –∏ B –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
  category    String
  imageUrl    String?
  videoUrl    String?
  
  // –ò—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  imageSourceType  ImageSourceType?  // YANDEX, GOOGLE, URL, UPLOAD
  imageSourceValue String?
  
  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  votesFor     Int @default(0)
  votesAgainst Int @default(0)
  views        Int @default(0)
  
  // –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Ä–µ–∂–∏–º–∞ "–ò–∑–Ω–∞–Ω–∫–∞"
  residue          String?  // –ö—É–ª—å—Ç—É—Ä–Ω—ã–µ —Å–ª–µ–¥—ã
  residueSource    String?
  history          String?  // –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è
  historySource    String?
  yearDiscovered   Int?
  similarEffectIds String[] @default([])
  currentState     String?  // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Ñ–∞–∫—Ç—ã)
  
  // –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ (JSON)
  interpretations Json?  // { scientificSource, communitySource, sourceLink, currentState }
  
  // –í–∏–¥–∏–º–æ—Å—Ç—å
  isVisible Boolean @default(true)
  
  // –°–≤—è–∑–∏
  submissions Submission[]
  comments    Comment[]
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

#### –ú–æ–¥–µ–ª—å `Vote` (–ì–æ–ª–æ—Å–∞)
```prisma
model Vote {
  id        String   @id @default(cuid())
  visitorId String   // –ê–Ω–æ–Ω–∏–º–Ω—ã–π ID –∏–∑ localStorage
  effectId  String
  variant   String   // 'A' –∏–ª–∏ 'B'
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@unique([visitorId, effectId])  // –û–¥–∏–Ω –≥–æ–ª–æ—Å –Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç
  @@index([visitorId])
  @@index([effectId])
}
```

#### –ú–æ–¥–µ–ª—å `Comment` (–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ / –ê—Ä—Ö–∏–≤ –ê–Ω–æ–º–∞–ª–∏–π)
```prisma
model Comment {
  id        String @id @default(cuid())
  effectId  String
  visitorId String
  
  type CommentType  // WITNESS, ARCHAEOLOGIST, THEORIST
  
  text     String
  imageUrl String?
  videoUrl String?
  audioUrl String?
  theoryType String?  // –î–ª—è THEORIST: "quantum", "timeline", "memory", "simulation", "other"
  
  status      CommentStatus @default(PENDING)
  moderatedAt DateTime?
  
  likes   Int @default(0)
  dislikes Int @default(0)
  reports Int @default(0)
  
  effect      Effect @relation(...)
  commentLikes CommentLike[]
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@index([effectId])
  @@index([visitorId])
  @@index([status])
  @@index([createdAt])
}
```

#### –ú–æ–¥–µ–ª—å `Category` (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)
```prisma
model Category {
  id        String   @id @default(cuid())
  slug      String   @unique  // "films", "brands", etc.
  name      String   // "–§–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã"
  emoji     String   // "üé¨"
  color     String?
  sortOrder Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

#### –ú–æ–¥–µ–ª—å `IdentityResult` (–¶–∏—Ñ—Ä–æ–≤–æ–π ID –•—Ä–æ–Ω–æ-–ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞)
```prisma
model IdentityResult {
  id          String   @id @default(cuid())
  syncRate    Int      // –ü—Ä–æ—Ü–µ–Ω—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (0-100)
  archetype   String   // "–°–∫–≤–æ–∑–Ω–æ–π –î—Ä–∏—Ñ—Ç–µ—Ä"
  description String   // –û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç AI
  stats       Json?    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  userId      String?
  createdAt   DateTime @default(now())
}
```

#### –ú–æ–¥–µ–ª—å `Submission` (–ó–∞—è–≤–∫–∏ –Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç—ã)
```prisma
model Submission {
  id String @id @default(cuid())
  
  category String
  title    String
  question String
  variantA String
  variantB String
  
  currentState   String?
  sourceLink     String?
  submitterEmail String?
  interpretations Json?
  
  status    String   @default("PENDING")
  createdAt DateTime @default(now())
  
  createdEffectId String?
  createdEffect   Effect? @relation(...)
}
```

---

## 3. –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### `app/` ‚Äî Next.js App Router

#### `app/actions/` ‚Äî Server Actions (–≤—Å–µ —Å `'use server'`)

**–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ:**
- `votes.ts` ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤, –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `voting.ts` ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è

**–≠—Ñ—Ñ–µ–∫—Ç—ã:**
- `effects.ts` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `find-new-effects.ts` ‚Äî AI-–∞–≥–µ–Ω—Ç "–û—Ö–æ—Ç–Ω–∏–∫" –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ Perplexity/Google

**AI –ì–µ–Ω–µ—Ä–∞—Ü–∏—è:**
- `generate-content.ts` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ (currentState, residue, history, interpretations) —á–µ—Ä–µ–∑ DeepSeek/Gemini + RAG (Exa.ai)
- `generate-identity.ts` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ ID –•—Ä–æ–Ω–æ-–ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞
- `gemini-extract.ts` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ Gemini —á–∞—Ç–∞

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:**
- `comments.ts` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–∏–µ, –º–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- `admin-comments.ts` / `admin-comments-v2.ts` ‚Äî –º–æ–¥–µ—Ä–∞—Ü–∏—è (v2 –¥–ª—è –æ–±—Ö–æ–¥–∞ –∫—ç—à–∞)

**–ê–¥–º–∏–Ω–∫–∞:**
- `admin.ts` ‚Äî CRUD —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –º–æ–¥–µ—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫
- `category.ts` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- `submission.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç—ã

**–£—Ç–∏–ª–∏—Ç—ã:**
- `upload.ts` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ Supabase/Vercel Blob
- `user-stats.ts` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤, majority/minority)
- `recalculate-votes.ts` ‚Äî –ø–µ—Ä–µ—Å—á–µ—Ç –≥–æ–ª–æ—Å–æ–≤ (–¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π)
- `wayback-search.ts` ‚Äî –ø–æ–∏—Å–∫ –≤ Wayback Machine
- `dev-tools.ts` ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

#### `app/effect/[id]/` ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞
- `page.tsx` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (SSR)
- `EffectPageClient.tsx` ‚Äî **–ö–†–ò–¢–ò–ß–ù–û:** –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –ª–æ–≥–∏–∫–æ–π –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è, –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞–º–∏, –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤ (–≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ: –û—Å—Ç–∞—Ç–∫–∏/–ò—Å—Ç–æ—Ä–∏—è/–¢–µ–æ—Ä–∏–∏; –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ: –§–∞–∫—Ç—ã/–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
  - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `LockedContent` ‚Äî –∑–∞–≥–ª—É—à–∫–∞ —Å –Ω–µ–æ–Ω–æ–≤—ã–º —Å–≤–µ—á–µ–Ω–∏–µ–º, —á–∞—Å—Ç–∏—Ü–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π `RealitySwitch`
  - –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `isUpsideDown` –∏ `userVote`
- `layout.tsx` ‚Äî layout –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `opengraph-image.tsx` ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è OG-–∫–∞—Ä—Ç–∏–Ω–∫–∞

#### `app/catalog/` ‚Äî –ö–∞—Ç–∞–ª–æ–≥ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- `page.tsx` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `CatalogClient.tsx` ‚Äî –∫–ª–∏–µ–Ω—Ç —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, –ø–æ–∏—Å–∫–æ–º, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π

#### `app/my-memory/` ‚Äî "–ú–æ—è –ü–∞–º—è—Ç—å" (–¶–∏—Ñ—Ä–æ–≤–æ–π ID)
- `page.tsx` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `IdentityClient.tsx` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞—Ä—Ö–µ—Ç–∏–ø–∞ –•—Ä–æ–Ω–æ-–ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞

#### `app/stats/` ‚Äî –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `page.tsx` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `StatsClient.tsx` ‚Äî –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã

#### `app/admin/` ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- `page.tsx` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `AdminClient.tsx` ‚Äî –∫–ª–∏–µ–Ω—Ç —Å —Ç–∞–±–∞–º–∏ (–≠—Ñ—Ñ–µ–∫—Ç—ã, –ö–∞—Ç–µ–≥–æ—Ä–∏–∏, –ó–∞—è–≤–∫–∏, –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
- `LoginForm.tsx` ‚Äî —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞

#### `app/` (–∫–æ—Ä–µ–Ω—å)
- `layout.tsx` ‚Äî –≥–ª–∞–≤–Ω—ã–π layout —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏, —à—Ä–∏—Ñ—Ç–∞–º–∏, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- `page.tsx` ‚Äî –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (SSR)
- `HomeClient.tsx` ‚Äî –∫–ª–∏–µ–Ω—Ç —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –¥–Ω—è, —Ç—Ä–µ–Ω–¥–∞–º–∏, –Ω–æ–≤—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- `globals.css` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏, CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∞–Ω–∏–º–∞—Ü–∏–∏, —Ç–µ–º—ã
- `template.tsx` ‚Äî template –¥–ª—è transitions –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏

### `components/` ‚Äî React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### `components/ui/` ‚Äî UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `StrangerVote.tsx` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (Stranger Things —Å—Ç–∏–ª—å)
- `RealitySwitch.tsx` ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ "–ò–∑–Ω–∞–Ω–∫–∞"
- `RealityTransition.tsx` ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ (RGB-—Å–¥–≤–∏–≥)
- `UpsideDownLayer.tsx` ‚Äî –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è —Ä–µ–∂–∏–º–∞ "–ò–∑–Ω–∞–Ω–∫–∞" (–Ω–µ–æ–Ω, —Å–ø–æ—Ä—ã, —Ç—É–º–∞–Ω)
- `GlitchTitle.tsx` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –≥–ª–∏—Ç—á-—ç—Ñ—Ñ–µ–∫—Ç–æ–º
- `ImageWithSkeleton.tsx` ‚Äî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å skeleton loader
- `ShareModal.tsx` ‚Äî –º–æ–¥–∞–ª–∫–∞ –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞
- `SoundToggle.tsx` ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∑–≤—É–∫–∞
- `Toggle.tsx` ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
- `CustomSelect.tsx` ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–π select
- `EmojiPickerInput.tsx` ‚Äî input —Å emoji picker

#### `components/comments/` ‚Äî –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `ArchiveAnomalies.tsx` ‚Äî –∞–∫–∫–æ—Ä–¥–µ–æ–Ω —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ (–ê—Ä—Ö–∏–≤ –ê–Ω–æ–º–∞–ª–∏–π)
- `CommentCard.tsx` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
- `CommentForm.tsx` ‚Äî —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (WITNESS/ARCHAEOLOGIST/THEORIST)
- `MediaPreview.tsx` ‚Äî –ø—Ä–µ–≤—å—é –º–µ–¥–∏–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ)
- `SafeMediaLink.tsx` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –º–µ–¥–∏–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

#### `components/admin/` ‚Äî –ê–¥–º–∏–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `EffectCard.tsx` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ –≤ –∞–¥–º–∏–Ω–∫–µ
- `modals/` ‚Äî –º–æ–¥–∞–ª–∫–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `tabs/` ‚Äî —Ç–∞–±—ã –∞–¥–º–∏–Ω–∫–∏
- `NeuralLink.tsx` ‚Äî AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### `components/` (–∫–æ—Ä–µ–Ω—å)
- `EffectCard.tsx` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞/–≥–ª–∞–≤–Ω–æ–π
- `EffectPageClient.tsx` ‚Äî **–ö–†–ò–¢–ò–ß–ù–û:** –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —ç—Ñ—Ñ–µ–∫—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `app/effect/[id]/page.tsx`)
  - –õ–æ–≥–∏–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è —Å –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞–º–∏ (–≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ)
  - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `LockedContent` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `AccordionItem` ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –∞–∫–∫–æ—Ä–¥–µ–æ–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
  - –£—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `isUpsideDown` –∏ `userVote`
- `Header.tsx` ‚Äî —à–∞–ø–∫–∞ —Å–∞–π—Ç–∞ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π (–ª–æ–≥–æ—Ç–∏–ø —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ `isUpsideDown`)
- `Footer.tsx` ‚Äî –ø–æ–¥–≤–∞–ª
- `Loading.tsx` / `LoadingSpinner.tsx` ‚Äî –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
- `Skeleton.tsx` ‚Äî skeleton loader
- `ScrollToTop.tsx` ‚Äî –∫–Ω–æ–ø–∫–∞ "–Ω–∞–≤–µ—Ä—Ö"
- `DonutChart.tsx` ‚Äî –∫—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞
- `AnimatedCounter.tsx` ‚Äî –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—á–µ—Ç—á–∏–∫
- `FadeIn.tsx` ‚Äî fade-in –∞–Ω–∏–º–∞—Ü–∏—è
- `PageTransition.tsx` ‚Äî –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- `debug/DevTools.tsx` ‚Äî –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### `lib/` ‚Äî –£—Ç–∏–ª–∏—Ç—ã –∏ –ª–æ–≥–∏–∫–∞

#### `lib/context/`
- `RealityContext.tsx` ‚Äî **–ö–†–ò–¢–ò–ß–ù–û:** –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ä–µ–∂–∏–º–∞ "–ò–∑–Ω–∞–Ω–∫–∞"
  - `isUpsideDown` ‚Äî —Ñ–ª–∞–≥ —Ä–µ–∂–∏–º–∞
  - `isUnlocked` ‚Äî —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ —Ä–µ–∂–∏–º (25+ –≥–æ–ª–æ—Å–æ–≤)
  - `voteCount` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `toggleReality()` ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
  - `incrementVotes()` ‚Äî –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞
  - `isTransitioning` ‚Äî —Ñ–ª–∞–≥ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞

#### `lib/` (–∫–æ—Ä–µ–Ω—å)
- `client-visitor.ts` ‚Äî **–ö–†–ò–¢–ò–ß–ù–û:** –µ–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è `visitorId` –∏–∑ localStorage (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏)
- `prisma.ts` ‚Äî –∫–ª–∏–µ–Ω—Ç Prisma (singleton)
- `constants.ts` ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ü–≤–µ—Ç–∞, –∏–∫–æ–Ω–∫–∏)
- `exa.ts` ‚Äî RAG –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ Exa.ai –¥–ª—è –æ—Å—Ç–∞—Ç–∫–æ–≤ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- `dorks.ts` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è Google Dorks
- `identity-engine.ts` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Ä—Ö–µ—Ç–∏–ø–∞ –•—Ä–æ–Ω–æ-–ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞
- `identity-data.ts` ‚Äî –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ, —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ, —à–∞–±–ª–æ–Ω—ã)
- `comments-tracker.ts` ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- `votes-store.ts` ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≥–æ–ª–æ—Å–æ–≤ (legacy, –º–∏–≥—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä)
- `visitor.ts` ‚Äî —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å visitorId (legacy)
- `utils.ts` ‚Äî –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (cn, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- `gemini-utils.ts` ‚Äî —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Gemini
- `file-upload.ts` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- `supabase.ts` / `supabase-admin.ts` ‚Äî –∫–ª–∏–µ–Ω—Ç—ã Supabase
- `system-logs.ts` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### `lib/hooks/`
- `useDebounce.ts` ‚Äî debounce –¥–ª—è –ø–æ–∏—Å–∫–∞
- `useThrottle.ts` ‚Äî throttle –¥–ª—è —Å–æ–±—ã—Ç–∏–π
- `useInView.ts` ‚Äî Intersection Observer hook
- `useCountUp.ts` ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–∞
- `useSound.ts` ‚Äî –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–æ–≤

#### `lib/security/`
- `media-whitelist.ts` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è –º–µ–¥–∏–∞ (imgur, yandex, google, etc.)

### `prisma/`
- `schema.prisma` ‚Äî —Å—Ö–µ–º–∞ –ë–î
- `seed.ts` ‚Äî —Å–∏–¥–µ—Ä –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î
- `seed-submissions.ts` ‚Äî —Å–∏–¥–µ—Ä –¥–ª—è –∑–∞—è–≤–æ–∫

### `public/`
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, SVG, robots.txt)
- `uploads/` ‚Äî –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Ñ–∞–π–ª—ã

---

## 4. –ö–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞ (Deep Dive)

### 4.1. –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ (Voting Flow)

**–ü—É—Ç—å –¥–∞–Ω–Ω—ã—Ö:**
```
–ö–ª–∏–µ–Ω—Ç (EffectCard/EffectClient) 
  ‚Üí saveVote() Server Action 
  ‚Üí Prisma (—Å–æ–∑–¥–∞–Ω–∏–µ Vote + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Effect.votesFor/votesAgainst) 
  ‚Üí revalidatePath() 
  ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI (optimistic update)
```

**–î–µ—Ç–∞–ª–∏:**

1. **–ö–ª–∏–µ–Ω—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É A –∏–ª–∏ B –≤ `StrangerVote`
2. **Optimistic Update:** –°—Ä–∞–∑—É –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π state (`setVotes`, `setUserVote`)
3. **Server Action:** –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `saveVote({ visitorId, effectId, variant })`
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `visitorId` (–º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç –≥–æ–ª–æ—Å–∞ (`@@unique([visitorId, effectId])`)
5. **–°–æ–∑–¥–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞:**
   - `prisma.vote.create()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
   - `prisma.effect.update()` ‚Äî –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç `votesFor` –∏–ª–∏ `votesAgainst`
6. **–†–µ–≤–∞–ª–∏–¥–∞—Ü–∏—è:** `revalidatePath()` –¥–ª—è `/effect/${id}`, `/`, `/catalog`
7. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞:** `incrementVotes()` –≤ `RealityContext` (–¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–∂–∏–º–∞ "–ò–∑–Ω–∞–Ω–∫–∞")

**Visitor ID:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `getClientVisitorId()` –∏–∑ `lib/client-visitor.ts`
- –•—Ä–∞–Ω–∏—Ç—Å—è –≤ `localStorage` –ø–æ–¥ –∫–ª—é—á–æ–º `'visitor-id'` (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏: `'visitorId'`, `'mandela_visitor_id'`)
- UUID —Ñ–æ—Ä–º–∞—Ç: `crypto.randomUUID()`

### 4.2. –†–µ–∂–∏–º "–ò–∑–Ω–∞–Ω–∫–∞" (Reality Mode / Upside Down)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

1. **RealityContext** (`lib/context/RealityContext.tsx`):
   - –•—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `isUpsideDown` (boolean)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É: `voteCount >= 25` (REQUIRED_VOTES)
   - –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ `sessionStorage.getItem('reality-mode')`
   - –î–æ–±–∞–≤–ª—è–µ—Ç/—É–¥–∞–ª—è–µ—Ç –∫–ª–∞—Å—Å `mode-upside-down` –Ω–∞ `<html>` —ç–ª–µ–º–µ–Ω—Ç

2. **CSS –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (`app/globals.css`):
   ```css
   :root {
     --vote-a-bg: #3b82f6;  /* –°–∏–Ω–∏–π –≤ –†–µ–∞–ª—å–Ω–æ—Å—Ç–∏ */
     --vote-b-bg: #f59e0b;  /* –û—Ä–∞–Ω–∂–µ–≤—ã–π –≤ –†–µ–∞–ª—å–Ω–æ—Å—Ç–∏ */
   }
   
   .mode-upside-down {
     --vote-a-bg: #dc2626;  /* –ö—Ä–∞—Å–Ω—ã–π –≤ –ò–∑–Ω–∞–Ω–∫–µ */
     --vote-b-bg: #06b6d4;  /* –¶–∏–∞–Ω –≤ –ò–∑–Ω–∞–Ω–∫–µ */
   }
   ```
   - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è Tailwind –∫–ª–∞—Å—Å–æ–≤ —á–µ—Ä–µ–∑ `!important`
   - –ò–Ω–≤–µ—Ä—Å–∏—è —Ü–≤–µ—Ç–æ–≤ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (A ‚Üî B)

3. **–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã:**
   - `UpsideDownLayer.tsx` ‚Äî –Ω–µ–æ–Ω (–∫—Ä–∞—Å–Ω—ã–π —Å–ª–µ–≤–∞, —Å–∏–Ω–∏–π —Å–ø—Ä–∞–≤–∞), —Ç—É–º–∞–Ω, —Å–ø–æ—Ä—ã, –∑–µ—Ä–Ω–∏—Å—Ç–æ—Å—Ç—å, –≤–∏–Ω—å—é–µ—Ç–∫–∞
   - `RealityTransition.tsx` ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ (RGB-—Å–¥–≤–∏–≥, scanlines, 1.2 —Å–µ–∫—É–Ω–¥—ã)
   - –ì–ª–∏—Ç—á-—ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö:
     - **–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:** –∫–ª–∞—Å—Å `glitch-reality` ‚Äî —á–∏—Å—Ç—ã–π –≥–ª–∏—Ç—á –±–µ–∑ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –∏ RGB-—Å–¥–≤–∏–≥–∞
     - **–ò–∑–Ω–∞–Ω–∫–∞:** –∫–ª–∞—Å—Å `glitch-mirror` ‚Äî –≥–ª–∏—Ç—á —Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–º –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ–º –∏ RGB-—Å–¥–≤–∏–≥–æ–º
   - `LockedContent` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:
     - –ù–µ–æ–Ω–æ–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ (–∫—Ä–∞—Å–Ω—ã–π —Å–ª–µ–≤–∞, —Å–∏–Ω–∏–π —Å–ø—Ä–∞–≤–∞) —Å –ø—É–ª—å—Å–∞—Ü–∏–µ–π (`animate-pulse-slow`)
     - –ß–∞—Å—Ç–∏—Ü—ã (`spore-locked`) —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π `spore-float-locked` ‚Äî –¥–≤–∏–∂–µ–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –ø–æ –≤—Å–µ–º—É –±–ª–æ–∫—É
     - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ `RealitySwitch` —Å –≤—ã—Å–æ–∫–∏–º z-index –¥–ª—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏

4. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞** (`components/EffectPageClient.tsx`):
   - **–í –†–µ–∞–ª—å–Ω–æ—Å—Ç–∏** (`!isUpsideDown`):
     - –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ "–§–∞–∫—Ç—ã" (currentState) ‚Äî –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
     - –ê–∫–∫–æ—Ä–¥–µ–æ–Ω—ã "–û—Å—Ç–∞—Ç–∫–∏", "–ò—Å—Ç–æ—Ä–∏—è", "–¢–µ–æ—Ä–∏–∏" **–ù–ï —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è** (–¥–∞–∂–µ –ø–æ—Å–ª–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è)
     - –í–º–µ—Å—Ç–æ –Ω–∏—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `LockedContent` —Å —Ç–µ–∫—Å—Ç–æ–º "–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ò–∑–Ω–∞–Ω–∫—É –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∫—Ä—ã—Ç—ã–º —Å–ª–æ—è–º —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏"
     - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ("–ê—Ä—Ö–∏–≤ –ê–Ω–æ–º–∞–ª–∏–π") –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (`hasAccessComments = !!userVote`)
   - **–í –ò–∑–Ω–∞–Ω–∫–µ** (`isUpsideDown`):
     - –ï—Å–ª–∏ **–ù–ï –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª** (`!userVote`): –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `LockedContent` —Å —Ç–µ–∫—Å—Ç–æ–º "–î–æ—Å—Ç—É–ø –∫ –∞—Ä—Ö–∏–≤–∞–º –ò–∑–Ω–∞–Ω–∫–∏ –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏"
     - –ï—Å–ª–∏ **–ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª** (`userVote`):
       - –í—Å–µ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã –¥–æ—Å—Ç—É–ø–Ω—ã: "–û—Å—Ç–∞—Ç–∫–∏", "–ò—Å—Ç–æ—Ä–∏—è", "–¢–µ–æ—Ä–∏–∏", "–§–∞–∫—Ç—ã", "–ê—Ä—Ö–∏–≤ –ê–Ω–æ–º–∞–ª–∏–π"
       - "–û—Å—Ç–∞—Ç–∫–∏", "–ò—Å—Ç–æ—Ä–∏—è", "–¢–µ–æ—Ä–∏–∏" ‚Äî –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –æ—Ç–∫—Ä—ã—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
       - "–§–∞–∫—Ç—ã" –∏ "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏" ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ (–º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)

5. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ:**
   ```typescript
   toggleReality() {
     setIsTransitioning(true);
     await delay(1200);  // –í—Ä–µ–º—è RGB-—Å–¥–≤–∏–≥–∞
     setIsUpsideDown(!isUpsideDown);
     sessionStorage.setItem('reality-mode', newState ? 'upside-down' : 'normal');
     setIsTransitioning(false);
   }
   ```

### 4.3. AI –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ú–æ–¥–µ–ª–∏:**
- **DeepSeek Chat** (—á–µ—Ä–µ–∑ OpenRouter) ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
- **Gemini 1.5 Flash** (Google) ‚Äî fallback –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
- **Exa.ai** ‚Äî RAG –ø–æ–∏—Å–∫ –¥–ª—è –æ—Å—Ç–∞—Ç–∫–æ–≤ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (residue)

**–ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** (`app/actions/generate-content.ts`):

1. **–ü–æ–∏—Å–∫ –æ—Å—Ç–∞—Ç–∫–æ–≤ (RAG):**
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ `generateResidueDorks()`
   - –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ `searchResidue()` (Exa.ai)
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ Wikipedia, Habr, –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö —Å–∞–π—Ç–æ–≤)
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞:**
   - –ü—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–∞–µ—Ç: title, question, variantA, variantB, residueContext
   - –ó–∞–ø—Ä–æ—Å –∫ DeepSeek/Gemini —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
   - –ü–∞—Ä—Å–∏–Ω–≥ JSON –æ—Ç–≤–µ—Ç–∞ (currentState, scientific, community, history, residue, –∏—Å—Ç–æ—á–Ω–∏–∫–∏)

3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Pollinations.ai –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å
   - –ü—Ä–æ–º–ø—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ title –∏ category

**–ü—Ä–æ–º–ø—Ç—ã:**
- –•—Ä–∞–Ω—è—Ç—Å—è –≤ `app/actions/generate-content.ts` (inline)
- –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç JSON –æ—Ç–≤–µ—Ç–∞
- User –ø—Ä–æ–º–ø—Ç –≤–∫–ª—é—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏

### 4.4. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–ê—Ä—Ö–∏–≤ –ê–Ω–æ–º–∞–ª–∏–π)

**–¢–∏–ø—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:**
- **WITNESS** ‚Äî –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- **ARCHAEOLOGIST** ‚Äî —Å –º–µ–¥–∏–∞ (imageUrl, videoUrl, audioUrl)
- **THEORIST** ‚Äî —Å –≤—ã–±–æ—Ä–æ–º —Ç–µ–æ—Ä–∏–∏ (quantum, timeline, memory, simulation, other)

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ `lib/security/media-whitelist.ts`
- Whitelist: imgur.com, imgbb.com, yandex.net, google.com, googleusercontent.com, disk.yandex.ru
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ URL (isSuspiciousUrl)
- –ú–æ–¥–µ—Ä–∞—Ü–∏—è: —Å—Ç–∞—Ç—É—Å PENDING ‚Üí APPROVED/REJECTED

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `ArchiveAnomalies.tsx` ‚Äî –∞–∫–∫–æ—Ä–¥–µ–æ–Ω —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É (—Ç–æ–ª—å–∫–æ APPROVED)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É)
- –õ–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏ —á–µ—Ä–µ–∑ `CommentLike` –º–æ–¥–µ–ª—å

### 4.5. –¶–∏—Ñ—Ä–æ–≤–æ–π ID –•—Ä–æ–Ω–æ-–ü—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è** (`lib/identity-engine.ts` + `app/actions/generate-identity.ts`):

1. **–°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –≥–æ–ª–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –†–∞—Å—á–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–ø-–∫–∞—Ç–µ–≥–æ—Ä–∏–∏

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—Ä—Ö–µ—Ç–∏–ø–∞:**
   - –ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ –∏–∑ `ADJECTIVES` (–Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)
   - –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑ `NOUNS` (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
   - –ü—Ä–∏–º–µ—Ä: "–°–∫–≤–æ–∑–Ω–æ–π –î—Ä–∏—Ñ—Ç–µ—Ä", "–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –°–ª–µ–¥–æ–ø—ã—Ç"

3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è:**
   - –®–∞–±–ª–æ–Ω—ã –∏–∑ `DESCRIPTION_TEMPLATES`
   - –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ + –¥–µ—Ç–∞–ª—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ + –≤–µ—Ä–¥–∏–∫—Ç
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ AI (Gemini/DeepSeek)

4. **–ú—ã—Å–ª—å –¥–Ω—è:**
   - –¶–∏—Ç–∞—Ç–∞ –∏–∑ `QUOTES` (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–≥–∞–º: high_mandela, tech, history, nostalgia)

5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
   - `IdentityResult` –º–æ–¥–µ–ª—å –≤ –ë–î
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ `app/my-memory/IdentityClient.tsx`

---

## 5. –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∑–∞–¥–∞—á–∏ (TODO)

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. ~~**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤ –≤ —Ä–µ–∂–∏–º–µ "–†–µ–∞–ª—å–Ω–æ—Å—Ç—å":**~~ ‚úÖ **–†–ï–®–ï–ù–û**
   - **–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `components/EffectPageClient.tsx`
   - **–†–µ—à–µ–Ω–∏–µ:** –ê–∫–∫–æ—Ä–¥–µ–æ–Ω—ã "–û—Å—Ç–∞—Ç–∫–∏", "–ò—Å—Ç–æ—Ä–∏—è", "–¢–µ–æ—Ä–∏–∏" –Ω–µ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ –†–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `LockedContent` —Å –ø—Ä–∏–∑—ã–≤–æ–º –ø–µ—Ä–µ–π—Ç–∏ –≤ –ò–∑–Ω–∞–Ω–∫—É

2. **–¢–∞–π–º–∞—É—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ Google Fonts:**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞–π–º–∞—É—Ç—ã 3000ms –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —à—Ä–∏—Ñ—Ç–æ–≤ (Inter, JetBrains Mono, Ruslan Display)
   - **–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `app/layout.tsx`
   - **–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–¥–æ–±–∞–≤–ª–µ–Ω—ã fallback —à—Ä–∏—Ñ—Ç—ã, `preload: false` –¥–ª—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö)
   - **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å `.env.local` —Å `NEXT_FONT_LOAD_TIMEOUT=10000`

3. **Server Action –æ—à–∏–±–∫–∏ –≤ dev —Ä–µ–∂–∏–º–µ:**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** `Failed to find Server Action "..."` –ø—Ä–∏ HMR
   - **–ü—Ä–∏—á–∏–Ω–∞:** Next.js –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ —Ö–µ—à–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏
   - **–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è dev —Ä–µ–∂–∏–º–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–º–æ–≥–∞–µ—Ç

### üü° –°—Ä–µ–¥–Ω–∏–µ –∑–∞–¥–∞—á–∏

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:**
   - –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç 9-31 —Å–µ–∫—É–Ω–¥—É
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤ (`optimizePackageImports`)
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã

2. **–ú–∏–≥—Ä–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤:**
   - –°—Ç–∞—Ä—ã–µ –≥–æ–ª–æ—Å–∞ –≤ `localStorage` –º–∏–≥—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ `migrateLocalVotes()`
   - –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –º–µ–¥–∏–∞:**
   - Whitelist –¥–æ–º–µ–Ω–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

1. **–£–ª—É—á—à–µ–Ω–∏–µ AI –ø—Ä–æ–º–ø—Ç–æ–≤:**
   - –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Next.js Image –≤–µ–∑–¥–µ
   - –î–æ–±–∞–≤–∏—Ç—å lazy loading –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Vitest + Testing Library

---

## 6. –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `PROJECT_CONTEXT_FULL.md`

1. **–ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã:** –≠—Ç–æ—Ç —Ñ–∞–π–ª ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ–∏—á ‚Äî –æ–±–Ω–æ–≤–ª—è–π —ç—Ç–æ—Ç —Ñ–∞–π–ª
3. **–î–ª—è AI:** –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º –≤—Å–µ–≥–¥–∞ —á–∏—Ç–∞–π —ç—Ç–æ—Ç —Ñ–∞–π–ª –ø–µ—Ä–≤—ã–º

### –°—Ç–∏–ª—å –∫–æ–¥–∞

1. **TypeScript:** –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è, –∏–∑–±–µ–≥–∞–π `any`
2. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Ö—É–∫–∞–º–∏
3. **Server Actions:** –í—Å–µ–≥–¥–∞ `'use server'` –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
4. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ:**
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: PascalCase (`EffectCard.tsx`)
   - –§—É–Ω–∫—Ü–∏–∏: camelCase (`saveVote`)
   - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã: UPPER_SNAKE_CASE (`REQUIRED_VOTES`)
   - –§–∞–π–ª—ã: kebab-case –¥–ª—è —É—Ç–∏–ª–∏—Ç (`client-visitor.ts`)

### –î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞

1. **–°—Ç–∏–ª—å:** Cyberpunk / Stranger Things
2. **–¶–≤–µ—Ç–∞:**
   - –†–µ–∞–ª—å–Ω–æ—Å—Ç—å: –°–∏–Ω–∏–π (#3b82f6) –∏ –û—Ä–∞–Ω–∂–µ–≤—ã–π (#f59e0b)
   - –ò–∑–Ω–∞–Ω–∫–∞: –ö—Ä–∞—Å–Ω—ã–π (#dc2626) –∏ –¶–∏–∞–Ω (#06b6d4)
3. **–ê–Ω–∏–º–∞—Ü–∏–∏:** GPU-accelerated —á–µ—Ä–µ–∑ Framer Motion
4. **–≠—Ñ—Ñ–µ–∫—Ç—ã:** –ì–ª–∏—Ç—á, RGB-—Å–¥–≤–∏–≥, –Ω–µ–æ–Ω, —Å–ø–æ—Ä—ã, —Ç—É–º–∞–Ω

### –†–∞–±–æ—Ç–∞ —Å –ë–î

1. **Prisma:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π `prisma` –∏–∑ `lib/prisma.ts`
2. **–ú–∏–≥—Ä–∞—Ü–∏–∏:** `npx prisma migrate dev` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
3. **Seed:** `npm run db:seed` –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä—É–π –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **Visitor ID:** –ò—Å–ø–æ–ª—å–∑—É–π `getClientVisitorId()` –∏–∑ `lib/client-visitor.ts`
3. **–ú–µ–¥–∏–∞:** –ü—Ä–æ–≤–µ—Ä—è–π –¥–æ–º–µ–Ω—ã —á–µ—Ä–µ–∑ `lib/security/media-whitelist.ts`

### Git workflow

1. **–ö–æ–º–º–∏—Ç—ã:** –û—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–¥–∞—á–∏
2. **–í–µ—Ç–∫–∏:** `feature/`, `fix/`, `refactor/`
3. **–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º:** `npm run lint`, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-19
- **–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 1.1.0
- **–°—Ç–∞—Ç—É—Å:** –í –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- **–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–∫—É—Å:** –†–µ–∂–∏–º "–ò–∑–Ω–∞–Ω–∫–∞", –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (—á–∞—Å—Ç–∏—Ü—ã, –Ω–µ–æ–Ω, –≥–ª–∏—Ç—á), AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- **–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
  - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤ –≤ —Ä–µ–∂–∏–º–µ –†–µ–∞–ª—å–Ω–æ—Å—Ç–∏
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `LockedContent` —Å –Ω–µ–æ–Ω–æ–≤—ã–º —Å–≤–µ—á–µ–Ω–∏–µ–º –∏ —á–∞—Å—Ç–∏—Ü–∞–º–∏
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–∞—é—â–∏–µ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã –≤ —Ä–µ–∂–∏–º–µ –ò–∑–Ω–∞–Ω–∫–∞
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–Ω—ã–µ –≥–ª–∏—Ç—á-—ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –†–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –ò–∑–Ω–∞–Ω–∫–∏
  - ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ `RealitySwitch` –≤ `LockedContent`

---

**–ö–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞. –û–±–Ω–æ–≤–ª—è–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–Ω–∞—á–∏–º–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.**

